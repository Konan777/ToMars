			private readonly IEngUnitStorage _engUnitStorage;
            var converter = new EngUnitConverters.Common.EngUnitConverter(_engUnitStorage);

public EngUnitConvertResult Convert(double value, int inEngUnitId, int outEngUnitId, out double outValue)

            double convertedValue;

            result.ConverterResult = converter.Convert(targetLAbreviation, sourceLAbreviation, targetValue.GetValueOrDefault(), out convertedValue);
            result.IsConverterted = result.ConverterResult.Error == EUConverterError.None && targetLAbreviation != sourceLAbreviation;

            result.ConverterValue = convertedValue;

Если в формуле есть выходной габарит, и меняется входной габарит - проверять на совпадение, выводить ошибку.

любое изменение формулы обновляет нижний грид
--габариты, указанные как выходные нельзя использовать в настройке тела формулы
Перенести мелкие классы в Model
При смене записи или комбо в певром гриде обновлять только второй грид
^^^ вынести код из RefreshGird
Учесть ситуацию когда грид 1 не имеет данных



- доделать AEComplexEntity и SpendingPurposes (то что приводило к ошибке)


-- ОУ с характеристикой
select ae.AEUid, ae.Name, AETest.AETestUid, AEtest.EngUnitId, Test.Name
from AE
inner join AETest on AETest.AEUid=AE.AEUid
inner join Test on Test.TestId=AETest.TestId
order by ae.AEUid

-- Единицы измерения с классом
select EngUnitClass.Name, EngUnit.EngUnitId, EngUnit.Name, EngUnit.LAbbreviation 
from EngUnit
inner join EngUnitClass on EngUnitClass.EngUnitClassId=EngUnit.ClassId
order by EngUnitClass.Name
