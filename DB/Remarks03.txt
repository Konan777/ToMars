1)
из постановки: 
	Поле Task.GroupKey заданий должно содержать ссылку на шаблон обслуживания оборудования.
при этом если смотреть Indusoft.LDS.Client.Rooms\Data\Impl\RoomsDataManager
CreateTask то Guid groupKey = room.RoomUid;
и в хранимке Task_Rooms_GetTasks_Secured_ByPeriod выборка идет по
INNER JOIN [Room] WITH(NOLOCK) ON [T].[GroupKey] = [Room].[RoomUid]

2) хранимка Task_Rooms_GetTasks_Secured_ByPeriod
идет связка INNER JOIN [AOD] WITH(NOLOCK) ON [T].[GroupKey] = [AOD].[AODUid]
AOD - Анализ по требованию. Нам такое тоже нужно делать?




Indusoft.LDS.Client.EQP\Manager\EqpManager.cs

        public ITaskManager TaskManager
        {
            get { return ServiceProvider.GetService<ITaskManager>(); }
        }
        public IRepositoryDataService MetadataManager
        {
            get
            {
                var res = DataServiceManager.GetService<IRepositoryDataService>();
                if (res == null)
                    throw new ApplicationException(string.Format("Не удалось получить интерфейс {0}", typeof(IRepositoryDataService)));

                return res;
            }
        }

        public Task CreateTask(Services.Contracts.EQP.Eqp eqp, EqpTypeMtcSchdTechTest[] tests, DateTime creationDate)
        {
            Status status = MetadataManager.GetStatus(Services.Contracts.Tasks.RS.Strings.TaskNew);
            if (eqp == null || !tests.Any())
                return null;

            Guid groupKey = eqp.EqpUid;
            var task = new Task();
            var taskContents = new List<TaskContent>();
            task.TaskUid = Guid.NewGuid();
            task.PriorityId = 3;
            task.GroupKey = groupKey;
            task.StatusId = status.StatusId;
            task.StartDate = creationDate;
            task.ExtensionUid = Services.Contracts.Rooms.RS.Guids.RoomsTaskExtensionUid;

            foreach (var test in tests)
            {
                var tc = new TaskContent();
                tc.TaskContentUid = Guid.NewGuid();
                tc.TaskUid = task.TaskUid;
                tc.ContentUid = test.TechTestUid;
                taskContents.Add(tc);
            }

            if (TaskManager.CreateTask(task, taskContents.ToArray()))
            {
                return task;
            }

            return null;
        }


Indusoft.LDS.Client.EQP\EqpTaskExtension.cs
удалить класс Tasker


Indusoft.LDS.Client.AnalysisInputControl\Controls\AnalysisTableInputControl.cs
public void PrepareControlValues(Guid groupKey, DateTime date, bool showDialog)
#region Создание образца для контроля параметров окружающей среды помещения
