https://scottiestech.info/2015/11/12/fix-uefi-bios-boot-problems-on-a-new-motherboard/

Right click on the database name
Choose Tasks > Generate scripts
Depending on your settings the intro page may show or not
Choose 'Select specific database objects',
Expand the tree view and check the relevant tables
Click Next
Click Advanced
Under General section, choose the appropriate option for 'Types of data to script'
Complete the wizard


CREATE VIEW [pivotparts].[Reactivation]
AS
	SELECT [DateTime], [AtomId], [Version], SUM([Уснувшие игроки]) AS [Уснувшие игроки], SUM([Реактивированные игроки]) AS [Реактивированные игроки]
	FROM (
		SELECT CAST(SB.[DateTime] AS DATE) AS [DateTime], SB.[VirtAtomId] AS [AtomId], SB.[VirtVersion] AS [Version], 0 AS [Уснувшие игроки], COUNT(*) AS [Реактивированные игроки]
		FROM [crm].[FixedBets] SB
		WHERE SB.ReactivatedDays>90
		GROUP BY CAST(SB.[DateTime] AS DATE), SB.[VirtAtomId], SB.[VirtVersion]
	
		UNION ALL

		-- Уснувшие игроки где [DateTime] дата из [UserRegistrations]
		-- При этом игрок считается уснувши если у него дни между ставками >90
		SELECT CAST(UR.[DateTime] AS DATE) as [DateTime], [AtomId], [Version], COUNT(*) AS [Уснувшие игроки], 0 AS [Реактивированные игроки]
		FROM (
			SELECT [UserId]
				,DATEDIFF(DAY, DI.Prev_FB_Date, DI.FB_Date) InactivieDays
			FROM (
				SELECT FB.[Id], FB.[UserId], FB.[DateTime] FB_Date, FB.IsSite, FB.IsMobile
				, LAG(FB.[DateTime]) OVER (PARTITION BY FB.[UserId] ORDER BY FB.[DateTime]) Prev_FB_Date
				FROM [crm].[FixedBets] FB
				WHERE FB.ReactivatedDays is null
			) DI
			WHERE DATEDIFF(DAY, Prev_FB_Date, FB_Date)>90
		) DII
		INNER JOIN [crm].[UserRegistrations] UR on UR.[UserId]=DII.[UserId]
		WHERE AtomId IS NOT NULL
		GROUP BY CAST(UR.[DateTime] AS DATE), [AtomId], [Version]

		UNION ALL

	) AS GD
	GROUP BY [DateTime], [AtomId], [Version]
GO
